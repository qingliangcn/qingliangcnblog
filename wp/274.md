<!--
author: admin
date: 2010-08-03
title: erlang init boot 浅析
tags: boot,Erlang,init,启动过程
category: Erlang
status: publish
summary: 说明：遇到一个OTP的问题，疑惑了很久，也就有了这篇文章。目的：跟踪Erlang的启动过程&nbsp;参考这里 http://erlangdisplay.javaeye.com/blog/315497 ，直接从erts-5.7.5/src/init.erl 的boot/1函数开始
-->

<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font color="#000000"><font size="3"><b style="mso-bidi-font-weight: normal"><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">说明：</span></b><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">遇到一个</span><span lang="EN-US"><font face="Calibri">OTP</font></span><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">的问题，疑惑了很久，也就有了这篇文章。</span></font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font color="#000000"><font size="3"><b style="mso-bidi-font-weight: normal"><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">目的：</span></b><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">跟踪</span><span lang="EN-US"><font face="Calibri">Erlang</font></span><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">的启动过程</span></font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span lang="EN-US"><o:p><font color="#000000" face="Calibri" size="3">&nbsp;</font></o:p></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><font color="#000000"><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">参考这里</span><font face="Calibri"> </font></font><span lang="EN-US"><a href="http://erlangdisplay.javaeye.com/blog/315497"><font color="#800080" face="Calibri">http://erlangdisplay.javaeye.com/blog/315497</font></a><font color="#000000" face="Calibri"> </font></span><font color="#000000"><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">，直接从</span><span lang="EN-US"><font face="Calibri">erts-5.7.5/src/init.erl </font></span><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">的</span><span lang="EN-US"><font face="Calibri">boot/1</font></span><span style="font-family: 宋体; mso-ascii-font-family: calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: calibri; mso-hansi-theme-font: minor-latin">函数开始（关于这个链接给出的结论以后会继续研究分析）：</span></font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><!--more--></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><span lang="EN-US"><o:p><font color="#000000" face="Calibri" size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">-</span><b><span lang="EN-US" style="font-family: consolas; color: #999999">spec</span></b><span lang="EN-US" style="font-family: consolas; color: black"> boot([binary()]) </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black"> no_return().<br />
	</span><span lang="EN-US" style="font-family: consolas; color: #00a000">boot</span><span lang="EN-US" style="font-family: consolas; color: black">(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootArgs</span><span lang="EN-US" style="font-family: consolas; color: black">) </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; </font></span><span lang="EN-US" style="font-family: consolas; color: #aa22ff"><font size="3">register</font></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">(init, self()),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: #aa22ff">process_flag</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">(trap_exit, true),<br />
	&nbsp;&nbsp;&nbsp; start_on_load_handler_process(),<br />
	&nbsp;&nbsp;&nbsp; {</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Start0</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Args</span><span lang="EN-US" style="font-family: consolas; color: black">} </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> parse_boot_args(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootArgs</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Start</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> map(</span><b><span lang="EN-US" style="font-family: consolas; color: #aa22ff">fun</span></b><span lang="EN-US" style="font-family: consolas; color: black"> prepare_run_args</span><span lang="EN-US" style="font-family: consolas; color: #666666">/1</span><span lang="EN-US" style="font-family: consolas; color: black">, </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Start0</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags0</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> flags_to_atoms_again(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; boot(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Start</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags0</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Args</span><span lang="EN-US" style="font-family: consolas; color: black">).<o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span lang="EN-US" style="font-family: consolas; color: #00a000">do_boot</span><span lang="EN-US" style="font-family: consolas; color: black">(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Start</span><span lang="EN-US" style="font-family: consolas; color: black">) </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; </font></span><span lang="EN-US" style="font-family: consolas; color: #aa22ff"><font size="3">process_flag</font></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">(trap_exit,true),<br />
	&nbsp;&nbsp;&nbsp; {</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pgm0</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Nodes</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Id</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Path</span><span lang="EN-US" style="font-family: consolas; color: black">} </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> prim_load_flags(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Root</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> b2s(get_flag(&#39;-root&#39;,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">)),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">PathFls</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> path_flags(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pgm</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> b2s(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pgm0</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; _</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pid</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> start_prim_loader(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span><span lang="EN-US" style="font-family: consolas; color: black">,b2a(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Id</span><span lang="EN-US" style="font-family: consolas; color: black">),</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pgm</span><span lang="EN-US" style="font-family: consolas; color: black">,bs2as(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Nodes</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bs2ss(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Path</span><span lang="EN-US" style="font-family: consolas; color: black">),</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">PathFls</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootFile</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> bootfile(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Root</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootList</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> get_boot(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootFile</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Root</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">LoadMode</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> b2a(get_flag(&#39;-mode&#39;,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">,false)),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Deb</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> b2a(get_flag(&#39;-init_debug&#39;,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">,false)),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootVars</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> get_flag_args(&#39;-boot_var&#39;,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Flags</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">ParallelLoad</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black"> <br />
	&nbsp;&nbsp;&nbsp; (</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pgm</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black">:</span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #bb4444">&quot;efile&quot;</span><span lang="EN-US" style="font-family: consolas; color: black">) </span><b><span lang="EN-US" style="font-family: consolas; color: #aa22ff">and</span></b><span lang="EN-US" style="font-family: consolas; color: black"> (</span><b><span lang="EN-US" style="font-family: consolas; color: blue">erlang</span></b><span lang="EN-US" style="font-family: consolas; color: black">:</span><span lang="EN-US" style="font-family: consolas; color: #aa22ff">system_info</span><span lang="EN-US" style="font-family: consolas; color: black">(thread_pool_size) </span><span lang="EN-US" style="font-family: consolas; color: #666666">&gt;</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">0</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">PathChoice</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black"> code_path_choice(),<br />
	&nbsp;&nbsp;&nbsp; eval_script(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootList</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">PathFls</span><span lang="EN-US" style="font-family: consolas; color: black">,{</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Root</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootVars</span><span lang="EN-US" style="font-family: consolas; color: black">},</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Path</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">,<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {true,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">LoadMode</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">ParallelLoad</span><span lang="EN-US" style="font-family: consolas; color: black">},</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Deb</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">PathChoice</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	<br />
	&nbsp;&nbsp;&nbsp; </span><i><span lang="EN-US" style="font-family: consolas; color: #008800">%% To help identifying Purify windows that pop up,</span></i></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; </font></span><i><span lang="EN-US" style="font-family: consolas; color: #008800"><font size="3">%% print the node name into the Purify log.</font></span></i><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; (</font></span><font size="3"><b><span lang="EN-US" style="font-family: consolas; color: #aa22ff">catch</span></b><span lang="EN-US" style="font-family: consolas; color: black"> </span><b><span lang="EN-US" style="font-family: consolas; color: blue">erlang</span></b><span lang="EN-US" style="font-family: consolas; color: black">:</span><span lang="EN-US" style="font-family: consolas; color: #aa22ff">system_info</span><span lang="EN-US" style="font-family: consolas; color: black">({purify, </span><span lang="EN-US" style="font-family: consolas; color: #bb4444">&quot;Node: &quot;</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">++</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #aa22ff">atom_to_list</span><span lang="EN-US" style="font-family: consolas; color: black">(</span><span lang="EN-US" style="font-family: consolas; color: #aa22ff">node</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">())})),<br />
	<br />
	&nbsp;&nbsp;&nbsp; start_em(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Start</span><span lang="EN-US" style="font-family: consolas; color: black">).<o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">boot/3</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">的基本流程为</span><span style="font-family: consolas; color: black"> <span lang="EN-US">start_prim_loader/6 </span></span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">&rarr;</span><span lang="EN-US" style="font-family: consolas; color: black"> eval_script/8 </span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">&rarr;</span><span style="font-family: consolas; color: black"> <span lang="EN-US">start_em/1<o:p></o:p></span></span></font></p>
<p align="left" class="MsoListParagraph" style="text-align: left; text-indent: -18pt; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1"><span lang="EN-US" style="font-family: consolas; color: black; mso-fareast-font-family: consolas; mso-bidi-font-family: consolas"><span style="mso-list: ignore"><font size="3">1．</font><span style="font: 7pt 'times new roman'"> </span></span></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">start_prim_loader/6</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">启动了</span><span lang="EN-US" style="font-family: consolas; color: black">erl_prim_loader</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">模块，负责代码加载（远程或者本地等）</span><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></font></p>
<p align="left" class="MsoListParagraph" style="text-align: left; text-indent: -18pt; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1"><span lang="EN-US" style="font-family: consolas; color: black; mso-fareast-font-family: consolas; mso-bidi-font-family: consolas"><span style="mso-list: ignore"><font size="3">2．</font><span style="font: 7pt 'times new roman'"> </span></span></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">eval_script/8 </span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">负责启动一些关键的进程</span><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">来看个</span><span lang="EN-US" style="font-family: consolas; color: black">eval_script/8</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">参数的例子：</span><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3">{[{preLoaded,[erl_prim_loader,erlang,init,otp_ring0,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>prim_file,prim_inet,prim_zip,zlib]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{progress,preloaded},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{path,[&quot;$ROOT/lib/kernel-2.13.5/ebin&quot;,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&quot;$ROOT/lib/stdlib-1.16.5/ebin&quot;]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{primLoad,[error_handler]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{kernel_load_completed},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{progress,kernel_load_completed},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{path,[&quot;$ROOT/lib/kernel-2.13.5/ebin&quot;]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{primLoad,[application,application_controller,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>application_master,application_starter,auth,code,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>code_server,disk_log,disk_log_1,disk_log_server,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>disk_log_sup,dist_ac,dist_util,erl_boot_server,erl_ddll,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>erl_distribution,erl_epmd,erl_reply|...]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{path,[&quot;$ROOT/lib/stdlib-1.16.5/ebin&quot;]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{primLoad,[array,base64,beam_lib,c,calendar,dets,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>dets_server,dets_sup,dets_utils,dets_v8,dets_v9,dict,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>digraph,digraph_utils,edlin,edlin_expand|...]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{progress,modules_loaded},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{path,[&quot;$ROOT/lib/kernel-2.13.5/ebin&quot;,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&quot;$ROOT/lib/stdlib-1.16.5/ebin&quot;]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{kernelProcess,heart,{heart,start,[]}},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{kernelProcess,error_logger,{error_logger,start_link,[]}},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{kernelProcess,application_controller,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{application_controller,start,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>[{application,kernel,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>[{description,[...]},{vsn,...},{...}|...]}]}},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{progress,init_kernel_started},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{apply,{application,load,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>[{application,stdlib,[{description,...},{...}|...]}]}},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{progress,applications_loaded},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{apply,{application,start_boot,[kernel,permanent]}},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{apply,{application,start_boot,[stdlib,permanent]}},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{apply,{c,erlangrc,[]}},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{progress,started}],<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;</span>&lt;0.0.0&gt;,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;</span>{[],[]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;</span>{&quot;/usr/local/lib/erlang&quot;,[]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;</span>false,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;</span>{true,false,false},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;</span>false,relaxed}<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">查看</span><span lang="EN-US" style="font-family: consolas; color: black">eval_script/8</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">的实现（代码就不贴了），发现启动了上面参数中</span><span style="font-family: consolas; color: black"> <span lang="EN-US">kernelProcess</span></span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">对应键值的进程，如：</span><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3">{kernelProcess,heart,{heart,start,[]}},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{kernelProcess,error_logger,{error_logger,start_link,[]}},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp; </span>{kernelProcess,application_controller,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun: yes">&nbsp;</span>{application_controller,start,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>[{application,kernel,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span lang="EN-US" style="font-family: consolas; color: #00a000">eval_script</span><span lang="EN-US" style="font-family: consolas; color: black">([{kernelProcess,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Server</span><span lang="EN-US" style="font-family: consolas; color: black">,{</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Mod</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Fun</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Args</span><span lang="EN-US" style="font-family: consolas; color: black">}}|</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">CfgL</span><span lang="EN-US" style="font-family: consolas; color: black">],</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">,<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">PathFs</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Vars</span><span lang="EN-US" style="font-family: consolas; color: black">,P,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Ph</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Deb</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">PathChoice</span><span lang="EN-US" style="font-family: consolas; color: black">) </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; debug(</font></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Deb</span><span lang="EN-US" style="font-family: consolas; color: black">,{start,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Server</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">}),<br />
	&nbsp;&nbsp;&nbsp; start_in_kernel(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Server</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Mod</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Fun</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Args</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; eval_script(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">CfgL</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">PathFs</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Vars</span><span lang="EN-US" style="font-family: consolas; color: black">,P,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Ph</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Deb</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">PathChoice</span><span lang="EN-US" style="font-family: consolas; color: black">);<o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span lang="EN-US" style="font-family: consolas; color: #00a000">start_in_kernel</span><span lang="EN-US" style="font-family: consolas; color: black">(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Server</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Mod</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Fun</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Args</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span><span lang="EN-US" style="font-family: consolas; color: black">) </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; </font></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Res</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #aa22ff">apply</span><span lang="EN-US" style="font-family: consolas; color: black">(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Mod</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Fun</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Args</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">!</span><span lang="EN-US" style="font-family: consolas; color: black"> {self(),started,{</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Server</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Res</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">}},<br />
	&nbsp;&nbsp;&nbsp; </span><b><span lang="EN-US" style="font-family: consolas; color: #aa22ff">receive</span></b></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; {</font></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span><span lang="EN-US" style="font-family: consolas; color: black">,ok,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pid</span><span lang="EN-US" style="font-family: consolas; color: black">} </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: #aa22ff">unlink</span><span lang="EN-US" style="font-family: consolas; color: black">(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pid</span><span lang="EN-US" style="font-family: consolas; color: black">),&nbsp; </span><i><span lang="EN-US" style="font-family: consolas; color: #008800">%% Just for sure...</span></i></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ok;<br />
	&nbsp;&nbsp;&nbsp; {</font></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span><span lang="EN-US" style="font-family: consolas; color: black">,ignore} </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ignore<br />
	&nbsp;&nbsp;&nbsp; </font></span><font size="3"><b><span lang="EN-US" style="font-family: consolas; color: #aa22ff">end</span></b><span lang="EN-US" style="font-family: consolas; color: black">.<o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">最终产生一条消息给</span><span lang="EN-US" style="font-family: consolas; color: black">init</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">：</span><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Init</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">!</span><span lang="EN-US" style="font-family: consolas; color: black"> {self(),started,{</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Server</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Res</span></font><span lang="EN-US" style="font-family: consolas; color: black"><font size="3">}},<br style="mso-special-character: line-break" />
	<br style="mso-special-character: line-break" />
	<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3">{BootPid,started,KernelPid} -&gt;<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>boot_loop(BootPid, new_kernelpid(KernelPid, BootPid, State));<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">init</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">收到消息后，就将该进程加入到</span><span lang="EN-US" style="font-family: consolas; color: black">kernel pids</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">的队列中了。</span><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span lang="EN-US" style="font-family: consolas; color: #00a000">new_kernelpid</span><span lang="EN-US" style="font-family: consolas; color: black">({</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Name</span><span lang="EN-US" style="font-family: consolas; color: black">,{ok,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pid</span><span lang="EN-US" style="font-family: consolas; color: black">}},</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootPid</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">State</span><span lang="EN-US" style="font-family: consolas; color: black">) </span><b><span lang="EN-US" style="font-family: consolas; color: #aa22ff">when</span></b><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #aa22ff">is_pid</span><span lang="EN-US" style="font-family: consolas; color: black">(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pid</span><span lang="EN-US" style="font-family: consolas; color: black">) </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; </font></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: #aa22ff">link</span><span lang="EN-US" style="font-family: consolas; color: black">(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pid</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootPid</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">!</span><span lang="EN-US" style="font-family: consolas; color: black"> {self(),ok,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pid</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">},<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Kernel</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">State</span><span lang="EN-US" style="font-family: consolas; color: #a0a000">#state.kernel</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">,<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">State</span><span lang="EN-US" style="font-family: consolas; color: #a0a000">#state</span><span lang="EN-US" style="font-family: consolas; color: black">{kernel </span><span lang="EN-US" style="font-family: consolas; color: #666666">=</span><span lang="EN-US" style="font-family: consolas; color: black"> [{</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Name</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Pid</span><span lang="EN-US" style="font-family: consolas; color: black">}|</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Kernel</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">]};<br />
	</span><span lang="EN-US" style="font-family: consolas; color: #00a000">new_kernelpid</span><span lang="EN-US" style="font-family: consolas; color: black">({_</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Name</span><span lang="EN-US" style="font-family: consolas; color: black">,ignore},</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootPid</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">State</span><span lang="EN-US" style="font-family: consolas; color: black">) </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; </font></span><font size="3"><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootPid</span><span lang="EN-US" style="font-family: consolas; color: black"> </span><span lang="EN-US" style="font-family: consolas; color: #666666">!</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black"> {self(),ignore},<br />
	&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">State</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">;<br />
	</span><span lang="EN-US" style="font-family: consolas; color: #00a000">new_kernelpid</span><span lang="EN-US" style="font-family: consolas; color: black">({</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Name</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">What</span><span lang="EN-US" style="font-family: consolas; color: black">},</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootPid</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">State</span><span lang="EN-US" style="font-family: consolas; color: black">) </span><span lang="EN-US" style="font-family: consolas; color: #666666">-&gt;</span></font><span lang="EN-US" style="font-family: consolas; color: black"><br />
	<font size="3">&nbsp;&nbsp;&nbsp; </font></span><font size="3"><b><span lang="EN-US" style="font-family: consolas; color: blue">erlang</span></b><span lang="EN-US" style="font-family: consolas; color: black">:</span><span lang="EN-US" style="font-family: consolas; color: #aa22ff">display</span><span lang="EN-US" style="font-family: consolas; color: black">({</span><span lang="EN-US" style="font-family: consolas; color: #bb4444">&quot;could not start kernel pid&quot;</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Name</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">What</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">}),<br />
	&nbsp;&nbsp;&nbsp; clear_system(</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">BootPid</span><span lang="EN-US" style="font-family: consolas; color: black">,</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">State</span></font><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">),<br />
	&nbsp;&nbsp;&nbsp; crash(</span><span lang="EN-US" style="font-family: consolas; color: #bb4444">&quot;could not start kernel pid&quot;</span><span lang="EN-US" style="font-family: consolas; color: black">, [</span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">Name</span><span lang="EN-US" style="font-family: consolas; color: black">, </span><span lang="EN-US" style="font-family: consolas; color: darkgoldenrod">What</span><span lang="EN-US" style="font-family: consolas; color: black">]).</span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3">{kernelProcess,application_controller,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{application_controller,start,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>[{application,kernel,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span lang="EN-US" style="font-family: consolas; color: black">application_controller</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">启动后会启动</span><span lang="EN-US" style="font-family: consolas; color: black">kernel app</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">，至此</span><span lang="EN-US" style="font-family: consolas; color: black">erlang</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">的启动过程就大致的有个了解了，而关于</span><span lang="EN-US" style="font-family: consolas; color: black">application</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">的启动过程就不在本次分析范围之内了。</span><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><b style="mso-bidi-font-weight: normal"><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">结论：</span></b><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></b></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">系统从</span><span lang="EN-US" style="font-family: consolas; color: black">init&lt;0.0.0&gt;</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">开始，一些关键的进程如：</span><span lang="EN-US" style="font-family: consolas; color: black">error_logger</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">、</span><span lang="EN-US" style="font-family: consolas; color: black">application_controller</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">、</span><span lang="EN-US" style="font-family: consolas; color: black">erl_prim_load</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">等都会预先启动并加入到</span><span lang="EN-US" style="font-family: consolas; color: black">kernel pids</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">中。</span><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><b style="mso-bidi-font-weight: normal"><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">附言：</span></b><b style="mso-bidi-font-weight: normal"><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></b></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">本次跟踪自然又离不开余锋老大</span><span lang="EN-US" style="font-family: consolas; color: black">(</span><span lang="EN-US"><a href="http://blog.yufeng.info/"><span style="font-family: consolas"><font color="#800080">http://blog.yufeng.info/</font></span></a></span><span lang="EN-US" style="font-family: consolas; color: black"> )</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">的指点，</span><span lang="EN-US" style="font-family: consolas; color: black">init.erl</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">是</span><span lang="EN-US" style="font-family: consolas; color: black">preloaded</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">模块：</span><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></font></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3">{preLoaded,[erl_prim_loader,erlang,init,otp_ring0,<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><font size="3"><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>prim_file,prim_inet,prim_zip,zlib]},<o:p></o:p></font></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><span lang="EN-US" style="font-family: consolas; color: black"><o:p><font size="3">&nbsp;</font></o:p></span></p>
<p align="left" class="MsoNormal" style="text-align: left; margin: 0cm 0cm 0pt"><font size="3"><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">而由于本文之前的无知，导致我去尝试修改</span><span lang="EN-US" style="font-family: consolas; color: black">init.erl</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">。</span><span style="font-family: consolas; color: black"> </span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">如果大家需要跟踪</span><span lang="EN-US" style="font-family: consolas; color: black">init.erl</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">的启动细节，需要修改源码包中的</span><span lang="EN-US" style="font-family: consolas; color: black"> erts/preloaded/src/init.erl</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">、</span><span lang="EN-US" style="font-family: consolas; color: black">make &amp;&amp; make install</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">，由于此时系统还没跑起来，所以</span><span lang="EN-US" style="font-family: consolas; color: black">error_logger io</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">之类的模块是没有用的，幸运的是</span><span lang="EN-US" style="font-family: consolas; color: black">preloaded</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">里面有</span><span lang="EN-US" style="font-family: consolas; color: black"> prim_file</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">，可以通过</span><span lang="EN-US" style="font-family: consolas; color: black"> prim_file:write_file/2</span><span style="font-family: 宋体; color: black; mso-ascii-font-family: consolas; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: consolas">把一些状态写入到文件中以便查看。</span></font><span lang="EN-US" style="font-family: consolas; color: black"><o:p></o:p></span></p>

<!--
author: qingliangcn
date: 2010-04-17
title: gen_server三两话
tags: Erlang,gen_server,otp
category: Erlang
status: publish
summary: 	(最近挺忙，都没时间写点啥)		gen_server是OTP中的一个重要组成，在开发中出现的频率相当高。弄明白这一块的，对于gen_server的使用有着相当好的帮忙。下面多数为代码。		从start_link开始：	gen_server.erl	start_link(Name
-->

<div class="Section0" style="layout-grid:  15.6pt none">
	<p><span style="font-family: '宋体'; font-size: 16pt; font-weight: bold; mso-spacerun: 'yes'"><o:p><span style="font-size: 11px"><span style="font-size: 12px">(最近挺忙，都没时间写点啥)</span></span></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">gen_server<font face="宋体">是</font><font face="Courier New">OTP</font><font face="宋体">中的一个重要组成，在开发中出现的频率相当高。弄明白这一块的，对于</font><font face="Courier New">gen_server</font><font face="宋体">的使用有着相当好的帮忙。下面多数为代码。</font></span><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">从<font face="Courier New">start_link</font><font face="宋体">开始：</font></span><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">gen_server.erl</span><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">start_link(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">gen:start(</span><span style="font-family: 'courier new'; color: rgb(95,158,160); font-size: 10.5pt; mso-spacerun: 'yes'">?MODULE</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;link,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt">&nbsp;</p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><!--more--></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">跳到<font face="Times New Roman">gen.erl</font><font face="宋体">，这里的</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">GenMod</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">值为</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">gen_server<font face="宋体">，</font><font face="Times New Roman">LinkP</font><font face="宋体">为</font><font face="Times New Roman">link</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">start(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">GenMod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">LinkP</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">case</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;where(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">of</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">undefined&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;do_spawn(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">GenMod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">LinkP</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Pid</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;{error,&nbsp;{already_started,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Pid</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}}</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">end</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">再跳：</span><span style="font-family: '宋体'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">do_spawn(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">GenMod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;link,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Time</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=&nbsp;timeout(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;proc_lib:start_link(</span><span style="font-family: 'courier new'; color: rgb(95,158,160); font-size: 10.5pt; mso-spacerun: 'yes'">?MODULE</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;init_it,</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">[</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">GenMod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;self(),&nbsp;self(),&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">],</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Time</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">spawn_opts(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">));</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">跳到<font face="Courier New">proc_lib.erl</font><font face="宋体">文件：</font></span><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">start_link(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Timeout</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">SpawnOpts</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">when</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;is_atom(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),&nbsp;is_atom(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),&nbsp;is_list(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Pid</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=&nbsp;</span><span style="font-family: 'courier new'; color: rgb(95,158,160); font-size: 10.5pt; mso-spacerun: 'yes'">?MODULE</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">:spawn_opt(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;ensure_link(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">SpawnOpts</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">sync_wait(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Pid</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Timeout</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">注意这里有个等待返回，之后需要</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">proc_lib:init_ack</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">来返回消息。</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">spawn_opt(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Opts</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">when</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;is_atom(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),&nbsp;is_atom(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),&nbsp;is_list(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=&nbsp;get_my_name(),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Ancestors</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=&nbsp;get_ancestors(),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;check_for_monitor(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Opts</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;erlang:spawn_opt(</span><span style="font-family: 'courier new'; color: rgb(95,158,160); font-size: 10.5pt; mso-spacerun: 'yes'">?MODULE</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;init_p,&nbsp;[</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Ancestors</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">],&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Opts</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">这里调用</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">proc_lib<font face="宋体">模块的</font><font face="Times New Roman">init_p</font><font face="宋体">方法：</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">-</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">spec</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;init_p(pid(),&nbsp;[pid()],&nbsp;function())&nbsp;-&gt;&nbsp;term()</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">init_p(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Ancestors</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Fun</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">when</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;is_function(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Fun</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;put(&#39;$ancestors&#39;,&nbsp;[</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">|</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Ancestors</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">]),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;{module,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;=&nbsp;erlang:fun_info(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Fun</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;module),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;{name,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;=&nbsp;erlang:fun_info(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Fun</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;name),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;{arity,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Arity</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;=&nbsp;erlang:fun_info(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Fun</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;arity),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;put(&#39;$initial_call&#39;,&nbsp;{</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Arity</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">try</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Fun</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">()</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">catch</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Class</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">:</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit_p(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Class</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">end</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">-</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">spec</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;init_p(pid(),&nbsp;[pid()],&nbsp;atom(),&nbsp;atom(),&nbsp;[term()])&nbsp;-&gt;&nbsp;term()</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">init_p(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Ancestors</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">when</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;is_atom(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),&nbsp;is_atom(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),&nbsp;is_list(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;put(&#39;$ancestors&#39;,&nbsp;[</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">|</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Ancestors</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">]),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;put(&#39;$initial_call&#39;,&nbsp;trans_init(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;init_p_do_apply(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">init_p_do_apply(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">try</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">apply(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">M</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">F</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">A</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">catch</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Class</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">:</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit_p(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Class</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">end</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">有点晕头了吧，<font face="Times New Roman">MFA</font><font face="宋体">是什么呢？如下：</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(95,158,160); font-size: 10.5pt; mso-spacerun: 'yes'">gen</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;init_it,</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">[</span><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">gen_server</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;self(),&nbsp;self(),&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">]</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">这里的</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">是我们自己的注册名，模块名、参数。</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">调回<font face="Times New Roman">init</font><font face="宋体">：</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">init_it(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">GenMod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">case</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;name_register(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">of</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">true&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;init_it2(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">GenMod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">{false,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Pid</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;proc_lib:init_ack(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;{error,&nbsp;{already_started,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Pid</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}})</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">end</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">init_it2(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">GenMod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">GenMod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">:init_it(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">ok<font face="宋体">，又回到</font><font face="Times New Roman">gen_server</font><font face="宋体">了。跳转到</font><font face="Times New Roman">gen_server</font><font face="宋体">的</font><font face="Times New Roman">init_it</font><font face="宋体">：</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">init_it(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;self,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;init_it(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;self(),&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">init_it(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name0</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=&nbsp;name(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name0</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=&nbsp;debug_options(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Options</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">case</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">catch</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">:init(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Args</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">of</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">{ok,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;proc_lib:init_ack(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;{ok,&nbsp;self()}),&nbsp;</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"> </span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;loop(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;infinity,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">{ok,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Timeout</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;proc_lib:init_ack(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;{ok,&nbsp;self()}),&nbsp;</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"> </span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;loop(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Timeout</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">{stop,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(178,34,34); font-size: 10.5pt; mso-spacerun: 'yes'">%%&nbsp;For&nbsp;consistency,&nbsp;we&nbsp;must&nbsp;make&nbsp;sure&nbsp;that&nbsp;the</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(178,34,34); font-size: 10.5pt; mso-spacerun: 'yes'">%%&nbsp;registered&nbsp;name&nbsp;(if&nbsp;any)&nbsp;is&nbsp;unregistered&nbsp;before</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(178,34,34); font-size: 10.5pt; mso-spacerun: 'yes'">%%&nbsp;the&nbsp;parent&nbsp;process&nbsp;is&nbsp;notified&nbsp;about&nbsp;the&nbsp;failure.</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(178,34,34); font-size: 10.5pt; mso-spacerun: 'yes'">%%&nbsp;(Otherwise,&nbsp;the&nbsp;parent&nbsp;process&nbsp;could&nbsp;get</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(178,34,34); font-size: 10.5pt; mso-spacerun: 'yes'">%%&nbsp;an&nbsp;&#39;already_started&#39;&nbsp;error&nbsp;if&nbsp;it&nbsp;immediately</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(178,34,34); font-size: 10.5pt; mso-spacerun: 'yes'">%%&nbsp;tried&nbsp;starting&nbsp;the&nbsp;process&nbsp;again.)</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;unregister_name(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name0</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;proc_lib:init_ack(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;{error,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">ignore&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;unregister_name(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name0</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;proc_lib:init_ack(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;ignore),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit(normal);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">{&#39;EXIT&#39;,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;unregister_name(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name0</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;proc_lib:init_ack(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;{error,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Else</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Error</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=&nbsp;{bad_return_value,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Else</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">},</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;proc_lib:init_ack(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Starter</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;{error,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Error</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Error</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">end</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">呵呵，苦尽甘来，终于来到<font face="Courier New">loop</font><font face="宋体">主循环了。&nbsp;</font><font face="Courier New">gen_server</font><font face="宋体">的消息怎么来的？就是这个</font><font face="Courier New">loop</font><font face="宋体">不断地取出消息、</font><font face="Courier New">decode_msg</font><font face="宋体">、再</font><font face="Courier New">loop</font><font face="宋体">来不断从消息队列中取出消息的。这个主循环就是我们的</font><font face="Courier New">gen_server</font><font face="宋体">进程了。</font></span><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: '宋体'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">loop(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;hibernate,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;proc_lib:hibernate(</span><span style="font-family: 'courier new'; color: rgb(95,158,160); font-size: 10.5pt; mso-spacerun: 'yes'">?MODULE</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,wake_hib,[</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">]);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">loop(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Time</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">receive</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Input</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Input</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">after</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Time</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;timeout</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">end</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;decode_msg(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Time</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;false)</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">decode_msg(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Time</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Hib</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">case</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">of</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">{system,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">From</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Req</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;sys:handle_system_msg(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Req</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">From</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(95,158,160); font-size: 10.5pt; mso-spacerun: 'yes'">?MODULE</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;[</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Time</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">],&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Hib</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">{&#39;EXIT&#39;,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;terminate(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">_Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">when</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=:=&nbsp;[]&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;handle_msg(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">_Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug1</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;=&nbsp;sys:handle_debug(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;{</span><span style="font-family: 'courier new'; color: rgb(95,158,160); font-size: 10.5pt; mso-spacerun: 'yes'">?MODULE</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;print_event},&nbsp;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;{in,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;handle_msg(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug1</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">end</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">这里我们就看到了</span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">terminate<font face="宋体">的自动回调（如果设置了</font><font face="Times New Roman">trap_exit</font><font face="宋体">）。</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">handle_msg<font face="宋体">中处理了</font><font face="Times New Roman">handle_call</font><font face="宋体">类型的调用，&nbsp;而</font><font face="Times New Roman">handle_cast</font><font face="宋体">和</font><font face="Times New Roman">handle_info</font><font face="宋体">则由</font></span><span style="font-family: 'courier new'; background: rgb(255,255,255); color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'; mso-highlight: rgb(255, 255, 255)">dispatch</span><span style="font-family: '宋体'; background: rgb(255,255,255); color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'; mso-highlight: rgb(255, 255, 255)">来处理：</span><span style="font-family: '宋体'; background: rgb(255,255,255); color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'; mso-highlight: rgb(255, 255, 255)"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">dispatch({&#39;$gen_cast&#39;,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">},&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">:handle_cast(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">dispatch(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Info</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">:handle_info(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Info</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">handle_msg<font face="宋体">处理</font><font face="Times New Roman">handle_call</font><font face="宋体">也很简单，回调我们的</font><font face="Times New Roman">handle_call</font><font face="宋体">方法：</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">handle_msg({&#39;$gen_call&#39;,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">From</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">},&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Parent</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">case</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">catch</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">:handle_call(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">From</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">of</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">......</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">至此，整个<font face="Times New Roman">gen_server</font><font face="宋体">的运行流程就清楚了（晕的话，多看几遍）。</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">回头再来看看<font face="Times New Roman">terminate</font><font face="宋体">的处理</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">terminate(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">case</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">catch</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Mod</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">:terminate(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">of</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">{&#39;EXIT&#39;,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">R</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;error_info(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">R</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">R</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">_</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">case</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">of</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">normal&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit(normal);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">shutdown&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit(shutdown);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">{shutdown,</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">_</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">}=</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Shutdown</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Shutdown</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">);</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">_</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;-&gt;</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;error_info(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Name</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Msg</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">State</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">,&nbsp;</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Debug</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">),</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="font-family: 'courier new'; color: rgb(184,134,11); font-size: 10.5pt; mso-spacerun: 'yes'">Reason</span><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">)</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,0); font-size: 10.5pt; mso-spacerun: 'yes'">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">end</span><span style="font-family: 'courier new'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(160,32,240); font-size: 10.5pt; font-weight: bold; mso-spacerun: 'yes'">end</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'">.</span><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt"><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'">这里<font face="Times New Roman">terminate</font><font face="宋体">在回调了</font><font face="Times New Roman">gen_server</font><font face="宋体">的</font><font face="Times New Roman">terminate</font><font face="宋体">函数后，又</font><font face="Times New Roman">exit</font><font face="宋体">了一次，目的是为了产生一个</font><font face="Times New Roman">&#39;EXIT&#39;</font><font face="宋体">消息给</font><font face="Times New Roman">supervisor</font><font face="宋体">，以便让</font><font face="Times New Roman">supervisor</font><font face="宋体">做相应的重启策略。</font></span><span style="font-family: '宋体'; font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
	<p class="p0" style="margin-top: 0pt; text-indent: 21pt; margin-bottom: 0pt"><span style="font-family: 'courier new'; color: rgb(0,0,255); font-size: 10.5pt; mso-spacerun: 'yes'"><o:p></o:p></span></p>
</div>
<!--EndFragment-->